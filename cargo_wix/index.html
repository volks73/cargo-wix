<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`cargo-wix` Binary and Subcommand"><title>cargo_wix - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cargo_wix" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../cargo_wix/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../cargo_wix/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate cargo_wix</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.3.8</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">cargo_wix</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/cargo_wix/main.rs.html#15-2028">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="cargo-wix-binary-and-subcommand"><a href="#cargo-wix-binary-and-subcommand"><code>cargo-wix</code> Binary and Subcommand</a></h2>
<p>The goal of the cargo-wix project and the <code>cargo wix</code> subcommand is to make
it easy to create a Windows installer (msi) for any Rust project. The
project is primarily implemented as a <a href="https://github.com/rust-lang/cargo/wiki/Third-party-cargo-subcommands">cargo subcommand</a>, but the core
functionality is provided in a library (crate). See the module-level
comments for the <a href="../wix/index.html">library</a> for more information about usage and
organization of the <code>wix</code> crate. The remainder of this documentation
focuses on the usage and features of the <code>cargo wix</code> subcommand.</p>
<h3 id="table-of-contents"><a href="#table-of-contents">Table of Contents</a></h3>
<ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#c-runtime">C Runtime</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#features">Features</a>
<ul>
<li><a href="#signing">Signing</a></li>
<li><a href="#templates">Templates</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#multiple-wix-sources">Multiple WiX Sources</a></li>
<li><a href="#bundles">Bundles</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#flags-and-options">Flags and Options</a></li>
</ul>
<h3 id="quick-start"><a href="#quick-start">Quick Start</a></h3>
<p>Ensure the <a href="http://wixtoolset.org">WiX Toolset</a> is installed and a <code>WIX</code> system environment
variable has been created. The installer for the WiX Toolset should create
the <code>WIX</code> system environment variable automatically. Then, start, or
restart, a command prompt (cmd.exe) and execute the following commands:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\&gt;cargo install cargo-wix
C:\&gt;cd Path\To\Project
C:\Path\To\Project\&gt;cargo wix init
C:\Path\To\Project\&gt;cargo wix
</code></pre></div>
<p>The Windows installer (msi) will be in the <code>C:\Path\To\Project\target\wix</code>
folder. The <code>cargo wix init</code> command will create a <code>wix</code> folder alongside
the <code>src</code> folder and the project’s manifest (Cargo.toml). The <code>wix</code> folder
will contain the WiX Source file (<code>main.wxs</code>) that was automatically
generated for the project based the contents of its manifest. The WiX Source
file can be customized using a text editor, and once the file exists, the
<code>cargo wix init</code> command does not need to be used again.</p>
<p>The <code>cargo wix</code> command uses the <code>wix\main.wxs</code> file generated from the
previous <code>cargo wix init</code> command as input for the WiX Toolset’s “compiler”
and “linker”, i.e. <code>candle.exe</code> and <code>light.exe</code>, respectively, to create the
Windows installer (msi). A variety of artifact files will be created in the
<code>target\wix</code> folder. These can be ignored and/or deleted.</p>
<p>The created installer will install the executable file in a <code>bin</code> folder
within the destination selected by the user during installation. It will add
a license file to the same folder as the <code>bin</code> folder, and it will add the
<code>bin</code> folder to the <code>PATH</code> system environment variable so that the
executable can be called from anywhere with a command prompt. Most of these
behaviors can be adjusted during the installation process. The default
installation destination is <code>C:\Program Files\&lt;project name&gt;</code>, where
<code>&lt;project name&gt;</code> is replaced with the name of the project.</p>
<h3 id="c-runtime"><a href="#c-runtime">C Runtime</a></h3>
<p>If using the <code>x86_64-pc-windows-msvc</code> or the <code>i686-pc-windows-msvc</code>
toolchain, then an appropriate C RunTime (CRT) must be available on the host
system <em>or</em> the CRT must be statically compiled with the Rust binary
(executable). By default, the CRT is dynamically linked to a Rust binary if
using Microsoft Visual C compiler (MSVC). This may cause issues and errors
when running the Rust binary immediately after installation on a clean
Windows installation, i.e. the CRT has not already been installed. If the
Rust compiler is installed and an <code>-msvc</code> toolchain is available, then the
Rust binary will execute after installation without an issue.</p>
<p><strong>Note</strong>, the Rust programming language does <em>not</em> need to be installed
to run an executable built using Cargo and Rust. Only a Microsoft-provided CRT
needs to be installed. These are often referred to as “redistributables”. Rust
with either of the <code>-msvc</code> toolchains will dynamically link against the
<code>vcruntime140.dll</code>, which is part of the Visual C++ 2015 redistributable and
freely provided by Microsoft.</p>
<p>For developers using the <code>cargo wix</code> subcommand to create an installer, this
dependency on the presence of an appropriate C runtime can lead to a sub-optimal
user experience. There are three options: (i) statically link the C runtime
within the Rust binary (recommended), (ii) add the Visual C++ redistributable to
the installer via the <a href="https://wixtoolset.org/documentation/manual/v3/howtos/redistributables_and_install_checks/install_vcredist.html">Merge module</a> method for the WiX Toolset, or (iii)
provide the user with instructions for downloading and installing the CRT
<em>before</em> running the executable.</p>
<p>The current recommended option is to <a href="https://doc.rust-lang.org/reference/linkage.html#static-and-dynamic-c-runtimes">statically link the CRT</a> when building
the Rust binary. Rust v1.19 or newer is required, and the solution
ultimately becomes adding the <code>-C target-feature=+crt-static</code> option to the
invocation of the Rust compiler (rustc). There are a variety of methods for
adding the option to the invocation, including but not limited to: (i)
creating a Cargo configuration file for the user or project, i.e.
<code>.cargo/config.toml</code>, and adding the following:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>[target.x86_64-pc-windows-msvc]
rustflags = [<span class="string">&quot;-C&quot;</span>, <span class="string">&quot;target-feature=+crt-static&quot;</span>]

[target.i686-pc-windows-msvc]
rustflags = [<span class="string">&quot;-C&quot;</span>, <span class="string">&quot;target-feature=+crt-static&quot;</span>]</code></pre></div>
<p>to the <code>config.toml</code> file or (ii) creating the <code>RUSTFLAGS</code> environment
variable and setting its value to <code>&quot;-C target-feature=+crt-static&quot;</code>. Please
see the Rust compiler documentation on static linking for more information
and details.</p>
<h3 id="examples"><a href="#examples">Examples</a></h3>
<p>All of the following examples use the native Command Prompt (cmd.exe) for
the Windows OS; however, the <a href="https://msdn.microsoft.com/en-us/library/f35ctcxw.aspx">Developer Prompt</a> installed with the <a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2017">VC Build
Tools</a> is recommended. A <a href="https://gitforwindows.org/">git bash</a>, <a href="https://github.com/PowerShell/PowerShell">PowerShell</a>, or <a href="https://github.com/alacritty/alacritty">Alacritty</a> terminal can
also be used.</p>
<p>Begin each example by starting the appropriate prompt and navigating to the
root folder of the Rust project. The <code>cargo wix</code> subcommand and binary
assumes the current working directory (cwd) is the project, a.k.a. package,
root folder, i.e. the same folder as the package’s manifest (Cargo.toml).</p>
<p>Let’s create a basic project with Cargo and then an installer.</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo init --bin --vcs none --name example
</code></pre></div>
<p>This will create a simple binary package named “example” without any version
control. While the <code>cargo wix</code> subcommand and binary does work with
libraries (crates) in addition to binaries (applications), generally an
installer is needed for a binary (application) not a library. Rust libraries
are typically distributed via <a href="https://crates.io">crates.io</a> and do not need an installer. The
package’s manifest should look like the following, but with your name and
email address for the <code>authors</code> field:</p>
<div class="example-wrap"><pre class="language-toml"><code>[package]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
authors = [&quot;First Last &lt;first.last@example.com&gt;&quot;]

[dependencies]
</code></pre></div>
<p>The next step is to create the WiX Source (wxs) file, which is needed to
create the installer for the project.</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix init
 WARN: A description was not specified at the command line or in the package&#39;s manifest (Cargo.toml). The description can be added manually to the generated WiX Source (wxs) file using a text editor.
 WARN: An EULA was not specified at the command line, a RTF license file was not specified in the package manifest&#39;s (Cargo.toml) &#39;license-file&#39; field, or the license ID from the package manifest&#39;s &#39;license&#39; field is not recognized. The license agreement dialog will be excluded from the installer. An EULA can be added manually to the generated WiX Source (wxs) file using a text editor.
 WARN: A help URL could not be found and it will be excluded from the installer. A help URL can be added manually to the generated WiX Source (wxs) file using a text editor.
 WARN: A license file could not be found and it will be excluded from the installer. A license file can be added manually to the generated WiX Source (wxs) file using a text editor.
</code></pre></div>
<p>The warnings can be ignored for the time being, and they will be addressed in
subsequent examples. The above command will create a <code>wix</code> folder with the
<code>main.wxs</code> file:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; dir /B
Cargo.toml
src
wix
C:\Path\to\Project&gt; dir wix /B
main.wxs
</code></pre></div>
<p>The <code>wix</code> folder and the <code>main.wxs</code> file now exist, and an installer can be
created:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix
</code></pre></div>
<p>This may take a moment to complete as the <code>cargo wix</code> subcommand will build
the application with the <em>Release</em> target profile and then build the
installer. The installer will be located in the <code>target\wix</code> folder.</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; dir target\wix /B
example-0.1.0-x86_64.msi
main.wixobj
</code></pre></div>
<p>Great! An installer (msi) exists for the application. The <code>main.wixobj</code> file
is an artifact of the installer build process and can be ignored and/or
deleted.</p>
<p>You can also automatically run the installer after creating it by
specifying the <code>--install</code> argument:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix --install
</code></pre></div>
<p>The installer that is created with the above steps and commands will install
the <code>example.exe</code> file to: <code>C:\Program Files\example\bin\example.exe</code>. It
will also add the <code>C:\Program Files\example\bin</code> path to the <code>PATH</code> system
environment variable, unless this feature is disabled during the
installation process from the Custom Setup dialog. The default welcome
screen, banner, and icons from the WiX Toolset’s default UI component will
be used. A license dialog will <em>not</em> appear for this installer.</p>
<p>The installer that is created from the previous example is relatively simple,
but so is the application and package. It would be nice to have a license
dialog appear in the installer that allows the end-user to review and
acknowledge the End User License Agreement (EULA). It would also be nice to
have this same license appear in the installation folder for the application
so end-users can review it after installation.</p>
<p>The license agreement dialog for a WiX Toolset-created installer must be in
the <a href="https://en.wikipedia.org/wiki/Rich_Text_Format">Rich Text Format</a> (.rtf). The majority of Rust binaries and libraries
are developed and distributed with an open source license. We will do the
same for the example binary here and use the GPL-3.0 license. Creating a RTF
version of the GPL-3.0 requires a third-party tool, such as <a href="https://en.wikipedia.org/wiki/WordPad">WordPad</a>, which
is freely available with any Windows distribution, <a href="https://products.office.com/en-us/home">Microsoft Office</a>,
<a href="https://www.libreoffice.org/">LibreOffice</a>, or any number of freely available text editors, word
processors, or document conversion tools. Luckily, the <code>cargo wix</code>
subcommand and binary has a RTF version of the GPL-3.0 license available and
eliminates the need to install, pay, and/or learn another tool to create the
EULA.</p>
<p>First, open the package’s manifest (Cargo.toml) in a text editor, like
<a href="https://en.wikipedia.org/wiki/Microsoft_Notepad">Microsoft Notepad</a>, and add the <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>license</code></a> field to the <code>package</code>
section with the <code>GPL-3.0</code> value:</p>
<div class="example-wrap"><pre class="language-toml"><code>[package]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
authors = [&quot;First Last &lt;first.last@example.com&gt;&quot;]
license = &quot;GPL-3.0&quot;

[dependencies]
</code></pre></div>
<p>Save the package’s manifest and exit the text editor. Now, we can create a
<code>wix\main.wxs</code> file that will include the license dialog with a GPL-3.0
EULA.</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix init --force
 WARN: A description was not specified at the command line or in the package&#39;s manifest (Cargo.toml). The description can be added manually to the generated WiX Source (wxs) file using a text editor.
 WARN: A help URL could not be found and it will be excluded from the installer. A help URL can be added manually to the generated WiX Source (wxs) file using a text editor.

C:\Path\to\Project&gt; dir wix /B
License.rtf
main.wxs
C:\Path\to\Project&gt; cargo wix
</code></pre></div>
<p>The <code>--force</code> flag is needed so that the existing <code>wix\main.wxs</code> is
overwritten with the new EULA-enabled <code>wix\main.wxs</code> file. The majority of
the warnings have also been addressed. Notice there is now a <code>License.rtf</code>
file in the <code>wix</code> folder. This will be used as the EULA in the license
agreement dialog for the installer and be included in the installation
folder with the binary.</p>
<p>A side note, while version control has been disabled for these examples, it is
best practice to include installer-related files in version control; thus,
the <code>wix\main.wxs</code> and <code>wix\License.rtf</code> should be added to version control.</p>
<p>Let’s fix the remaining warnings. Both of the remaining warnings can be
resolved in multiple ways. The first is to use the options available for the
<code>cargo wix init</code> subcommmand following the previous example project:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix init --force -d &quot;This is a description&quot; -u http://www.example.com

C:\Path\to\Project&gt; dir wix /B
License.rtf
main.wxs
C:\Path\to\Project&gt; cargo wix
</code></pre></div>
<p>The warnings for the description and help URL have disappeared. The
<code>-d,--description</code> option for the <code>cargo wix init</code> command adds a
description for the installer. Similarly, the <code>-u,--url</code> option adds a help
URL. The <code>--force</code> flag is still needed to overwrite the previous
<code>wix\main.wxs</code> file.</p>
<p>Another possibility is to add the <code>description</code> and <code>homepage</code> fields to the
package’s manifest (Cargo.toml), and then initialize and create the
installer. The cargo-wix binary and subcommand will use these fields, among
others, to automatically include the values into the installer. The
<code>-d,--description</code> and <code>-u,--url</code> options can still be used to override the
values from the package’s manifest. This can be useful if the contents of
the installer might need to be different or more detailed than the package.</p>
<p>Following from the previous example, open the package’s manifest
(Cargo.toml) in a text editor, like <a href="https://en.wikipedia.org/wiki/Microsoft_Notepad">Microsoft Notepad</a>, and add the
<a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>description</code></a> and <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>homepage</code></a> fields to the <code>package</code> section:</p>
<div class="example-wrap"><pre class="language-toml"><code>[package]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
authors = [&quot;First Last &lt;first.last@example.com&gt;&quot;]
license = &quot;GPL-3.0&quot;
description = &quot;This is a description&quot;
homepage = &quot;http://www.example.com&quot;

[dependencies]
</code></pre></div>
<p>Save the package’s manifest and exit the text editor. Now, we can create a
<code>wix\main.wxs</code> file without any warnings and uses the description and
homepage from the package’s manifest:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix init --force
C:\Path\to\Project&gt; dir wix /B
License.rtf
main.wxs
C:\Path\to\Project&gt; cargo wix
</code></pre></div>
<p>The <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>documentation</code></a> and <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>repository</code></a> fields can be used instead of the
<a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>homepage</code></a> field for the help URL, too.</p>
<h3 id="features"><a href="#features">Features</a></h3>
<p>The cargo-wix binary, and related <code>cargo wix</code> subcommand, use the WiX
Toolset and the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa387764(v=vs.85).aspx">SignTool</a> application available in the <a href="https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk">Windows 10 SDK</a>.
These are obviously Windows-only applications, so while the crate and binary
can be built on any platform supported by the <a href="https://www.rust-lang.org">Rust</a> programming language
and <a href="https://crates.io">Cargo</a>, the <code>cargo wix</code> subcommand is only really useful in a Windows
environment.</p>
<p>The WiX Toolset provides a “compiler” (<code>candle.exe</code>) and “linker”
(<code>light.exe</code>). These can be found in the <code>bin</code> directory of the installation
location for the WiX Toolset. The value of the <code>WIX</code> system environment
variable that is created during installation of the WiX Toolset is a path to
the installation folder that contains the <code>bin</code> folder. The <code>WIX</code> system
environment variable is used by the <code>cargo wix</code> subcommand with
the <a href="https://doc.rust-lang.org/std/process/struct.Command.html"><code>std::process::Command</code></a> module to create installers.</p>
<h4 id="signing"><a href="#signing">Signing</a></h4>
<p>The Windows SDK provides a signer (<code>signtool</code>) application for signing
installers. The application is installed in the <code>bin</code> folder of the Windows
SDK installation. The location of the <code>bin</code> folder varies depending on the
version. It is recommended to use the Developer Prompt to ensure the
<code>signtool</code> application is available. Signing an installer is optional.</p>
<h4 id="templates"><a href="#templates">Templates</a></h4>
<p>The WiX Toolset requires a WiX Source (WXS) file, which is an <a href="https://en.wikipedia.org/wiki/XML">XML</a> file. A
template is provided with this binary that attempts to meet the majority
of use cases for developers and avoid requiring extensive knowledge of the
WiX Toolset and Windows installer technologies. Modification of the template
is encouraged, but please consult the WiX Toolset’s extensive
<a href="http://wixtoolset.org/documentation/">documentation</a> and <a href="https://www.firegiant.com/wix/tutorial/">tutorials</a> for information about writing (authoring),
customizing, and using WXS files. This documentation here is only for this
binary and subcommand.</p>
<p>The <a href="../wix/enum.Template.html">WXS</a> template is embedded in the binary installation of the subcommand
and it can be printed to STDOUT using the <code>cargo wix print wxs</code> command from
the command prompt (cmd.exe). Note, each time the <code>cargo wix print wxs</code>
command is invoked, new Globally Unique Identifiers (<a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">GUID</a>) are generated
for fields that require them. Thus, a developer does not need to worry about
generating GUIDs and can begin using the template immediately with this
subcommand or the WiX Toolset’s compiler (<code>candle.exe</code>) and linker
(<code>light.exe</code>) applications.</p>
<p>In addition to the WXS template, there are several license templates which
are used to generate an End User License Agreement (EULA) during the <code>cargo wix init</code> command. Depending on the license ID(s) in the <code>license</code> field for
a package’s manifest (Cargo.toml), a license file in the Rich Text Format
(RTF) is generated from a template and placed in the <code>wix</code> folder. This RTF
file is then displayed in the license agreement dialog of the installer. See
the help information on the <code>carge wix print</code> subcommand:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; cargo wix print --help
</code></pre></div>
<p>for information about supported licenses. If the <code>license</code> field is
not used, or the license ID is not supported, then the EULA is <em>not</em>
automatically created during initialization and it will have to be created
manually with a text editor or some other authoring tool.</p>
<p>The <code>cargo wix init</code> subcommand uses a combination of the <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>license</code></a> and
<a href="https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata"><code>license-file</code></a> fields of the project’s manifest (Cargo.toml) to determine
if a <a href="https://en.wikipedia.org/wiki/Sidecar_file">sidecar</a> license file should be included in the installation folder
alongside the <code>bin</code> folder. The <code>license</code> field appears to be the more
commonly used field to describe the licensing for a Rust project and
package, while the <code>license-file</code> field is used to specify a custom, or
proprietary, license.</p>
<p>The top three most common licenses for Rust projects are supported from the
<code>license</code> field, i.e. MIT, Apache-2.0, and GPLv3. If any of these three
supported open source licenses are used for the <code>license</code> field, then a
<code>License.rtf</code> file is generated from an embedded template and placed in the
<code>wix</code> folder as part of the <code>cargo wix init</code> subcommand. This generated RTF
file will be used as a sidecar file and for the End User License Agreement
(EULA) that is displayed in the license agreement dialog of the installer.
If the <code>license-file</code> field is used and it contains a path to a file with
the <code>.rtf</code> extension, then this file will be used as a sidecar file and for
the EULA. If neither of these fields exist or contain valid values, then no
sidecar file is included in the installation and no license agreement dialog
appears during installation. This default behavior can be overridden with
the <code>-l,--license</code> and <code>-e,--eula</code> options for the <code>cargo wix init</code>
subcommand.</p>
<h4 id="variables"><a href="#variables">Variables</a></h4>
<p>The cargo-wix subcommand automatically passes some Cargo and build
configuration-related values to the WiX Toolset compiler (candle.exe). These
variables can be used within a WiX Source (WXS) file using the
<code>$(var.&lt;VARIABLE&gt;)</code> notation, where <code>&lt;VARIABLE&gt;</code> is replaced with the name
of variable passed from the cargo-wix subcommand to the WiX Toolset
compiler using the <code>-DKEY=VALUE</code> option. Notable usage of these variables
are in <a href="https://wixtoolset.org/documentation/manual/v3/overview/preprocessor.html">WiX preprocessor</a> directives to dynamically change the installer
creation at build time. Below is a current list of variables passed from the
cargo-wix subcommand to a WXS file during installer creation.</p>
<ul>
<li><code>TargetTriple</code> = The rustc target triple name as seen with the <code>rustc --print target-list</code> command</li>
<li><code>TargetEnv</code> = The rustc target environment, as seen with the output from
the <code>rustc --print cfg</code> command as <code>target_env</code>. On Windows, this typically
either <code>msvc</code> or <code>gnu</code> depending on the toolchain downloaded and installed.</li>
<li><code>TargetVendor</code> = The rustc target vendor, as seen with the output from the
<code>rustc --print cfg</code> command as <code>target_vendor</code>. This is typically <code>pc</code>, but Rust
does support other vendors, like <code>uwp</code>.</li>
<li><code>CargoTargetBinDir</code> = The complete path to the binary (exe). The default
would be <code>target\release\&lt;BINARY_NAME&gt;.exe</code> where <code>&lt;BINARY_NAME&gt;</code> is replaced
with the name of each binary target defined in the package’s manifest
(Cargo.toml). If a different rustc target triple is used than the host, i.e.
cross-compiling, then the default path would be
<code>target\&lt;CARGO_TARGET&gt;\&lt;CARGO_PROFILE&gt;\&lt;BINARY_NAME&gt;.exe</code>, where
<code>&lt;CARGO_TARGET&gt;</code> is replaced with the <code>CargoTarget</code> variable value and
<code>&lt;CARGO_PROFILE&gt;</code> is replaced with the value from the <code>CargoProfile</code> variable.</li>
<li><code>CargoTargetDir</code> = The path to the directory for the build artifacts, i.e.
<code>target</code>.</li>
<li><code>CargoProfile</code> = Either <code>debug</code> or <code>release</code> depending on the build
profile. The default is <code>release</code>.</li>
<li><code>Platform</code> = (Deprecated) Either <code>x86</code>, <code>x64</code>, <code>arm</code>, or <code>arm64</code>. See the
documentation for the WiX Toolset compiler (candle.exe) <code>-arch</code> option.
Note, this variable is deprecated and will eventually be removed because it is
ultimately redundant to the <code>$(sys.BUILDARCH)</code> variable that is already provided
by the WiX Toolset compiler. Existing projects should replace usage of
<code>$(var.Platform)</code> with <code>$(sys.BUILDARCH)</code>. No action is needed for new projects.</li>
<li><code>Profile</code> = (Deprecated) See <code>CargoProfile</code>.</li>
<li><code>Version</code> = The version for the installer. The default is the
<code>Major.Minor.Fix</code> semantic versioning number of the Rust package.</li>
</ul>
<p>Additional, user-defined variables for custom WXS files can be passed to the
WiX Toolset compiler (candle.exe) using the cargo-wix subcommand
<code>-C,--compiler-arg</code> option. For example,</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\To\Project\&gt;cargo wix -C &quot;-DUSER_KEY=USER_VALUE&quot;
</code></pre></div><h4 id="extensions"><a href="#extensions">Extensions</a></h4>
<p>The <a href="https://wixtoolset.org//documentation/manual/v3/wixui/wixui_dialog_library.html">WixUIExtension</a> and <a href="https://wixtoolset.org/documentation/manual/v3/xsd/util/">WixUtilExtension</a> are included in every execution
of the default <em>create</em> cargo-wix subcommand, i.e. <code>cargo wix</code>. This is the
same as calling either the compiler (candle.exe) or the linker (light.exe)
with the <code>-ext WixUIExtension -ext WixUtilExtension</code> options. These two
extensions are commonly used to create installers when using the WiX
Toolset, so these are included by default. Additionally, the WixUIExtension
is used for the template WXS file.</p>
<p>Additionally, the <a href="https://wixtoolset.org/documentation/manual/v3/bundle/wixstdba/">WixBalExtension</a> is automatically included if the
cargo-wix subcommand detects a bundle (exe) is to be created instead of a
MSI package. See the <a href="#bundles">Bundles</a> section for more information about
creating and managing bundles with the cargo-wix subcommand.</p>
<h4 id="multiple-wix-sources"><a href="#multiple-wix-sources">Multiple WiX Sources</a></h4>
<p>The cargo-wix subcommand supports including multiple WXS files when creating
an installer. A lot of customization is possible through the WXS file and
sometimes the installer’s source code becomes its own project where
organization and formatting are important. Breaking up a single, large WXS
file into multiple WXS files can be useful for code readability and project
navigation. Thus, cargo-wix will include any file with the <code>.wxs</code> file
extension found in the default source folder, <code>wix</code>, when creating an
installer. For example, say you have the following project with three WXS
files in the <code>wix</code> sub-folder:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; dir /B
Cargo.toml
src
wix
C:\Path\to\Project&gt; dir wix /B
first.wxs
second.wxs
third.wxs
</code></pre></div>
<p>When the <code>cargo wix</code> default <em>create</em> command is executed, all three WXS files
will be included and used to create the installer. Generally, this
translates to the following set of commands:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Project&gt; candle -out target\wix\ wix\first.wxs wix\second.wxs wix\third.wxs
C:\Path\to\Project&gt; light -out target\wix\example-0.1.0-x86_64.msi target\wix\first.wixobj target\wix\second.wixobj target\wix\third.wixobj
</code></pre></div>
<p>Alternatively, multiple WXS files can also be included when creating an
installer by including the relative or absolute paths to the WXS files as
arguments to the subcommand, but any WXS files in the default, <code>wix</code>,
sub-folder are ignored and would have to be explicitly included. For
example,</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\To\Project&gt; cargo wix path\to\first\wxs\file\one.wxs path\to\second\wxs\file\two.wxs
</code></pre></div><h4 id="bundles"><a href="#bundles">Bundles</a></h4>
<p>It is possible to create <a href="https://wixtoolset.org/documentation/manual/v3/bundle/">bundle-based installers</a> with the WiX Toolset. The
cargo-wix subcommand and binary currently offer limited support for creating
bundles from Rust projects. This includes automatically detecting if a
bundle is to be created by inspecting all WiX Object (wixobj) files before
linking and changing the file extension from <code>msi</code> to <code>exe</code>, as bundles
require the executable (exe) file extension. In addition to automatically
changing the file extension of the installer, the <a href="https://wixtoolset.org/documentation/manual/v3/bundle/wixstdba/">WixBalExtension</a> is
included automatically during linking if a bundle is detected because this
extension includes a standard bootstrapper application that is commonly used
to build and customize bundles.</p>
<p>While the cargo-wix subcommand does provide some support for bundles with
automatic file extension determination and inclusion of useful
bundle-centric extensions, the process for creating a bundle for a Rust
project is currently a manual process. Let’s assume the following
<a href="https://doc.rust-lang.org/cargo/reference/workspaces.html">workspace</a>-based Rust project layout and structure:</p>
<div class="example-wrap"><pre class="language-text"><code>|-- C:\Path\to\Rust\Project
|-- |-- Cargo.toml
|-- |-- client
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- server
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
</code></pre></div>
<p>The virtual manifest, Cargo.toml, in the root of the project is a <a href="https://doc.rust-lang.org/cargo/reference/workspaces.html">virtual
manifest</a> that only contains the following:</p>
<div class="example-wrap"><pre class="language-toml"><code>[workspace]
members = [&quot;client&quot;, &quot;server&quot;]
</code></pre></div>
<p>The package manifests for the workspace members, <code>client\Cargo.toml</code> and
<code>server\Cargo.toml</code>, are the typical package manifests content for a binary
package.</p>
<p>The goal is to create a bundle-based executable that contains and
installs both the client and server packages through their respective
installers (MSI packages). A combination of manual file manipulation and the
cargo-wix subcommand can be used to accomplish this goal, all from the root
of the workspace. Begin by creating the WiX Source (wxs) files for the
client and server MSI packages:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Rust\Workspace&gt; cargo wix init client\Cargo.toml
C:\Path\to\Rust\Workspace&gt; cargo wix init server\Cargo.toml
</code></pre></div>
<p>The following project layout should have been created:</p>
<div class="example-wrap"><pre class="language-text"><code>|-- C:\Path\to\Rust\Workspace
|-- |-- Cargo.toml
|-- |-- client
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
|-- |-- server
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
</code></pre></div>
<p>The WiX Source (wxs) files created for the client and server crates of the
Rust workspace using the cargo-wix subcommand will be generated following
the normal rules, features, and templates when using the <code>cargo wix init</code>
within a non-workspace-based project.</p>
<p>With the WiX Source (wxs) files created for the two MSI-based installers, a
bundle-based WiX Source (wxs) file must be created for the workspace and
bundle. Create a new <code>main.wxs</code> file and place it in a <code>wix</code> sub-folder
relative to the workspace root. The following project layout should exist:</p>
<div class="example-wrap"><pre class="language-text"><code>|-- C:\Path\to\Rust\Workspace
|-- |-- Cargo.toml
|-- |-- client
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
|-- |-- server
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
|-- |-- wix
|-- |-- |-- main.wxs
</code></pre></div>
<p>Open the <code>wix\main.wxs</code> file in a suitable text editor and add the following
XML to it to define the bundle:</p>
<div class="example-wrap"><pre class="language-xml"><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;Wix xmlns=&quot;http://schemas.microsoft.com/wix/2006/wi&quot;&gt;
  &lt;Bundle Version=&quot;1.0.0&quot; UpgradeCode=&quot;[Your GUID Here]&quot;&gt;
    &lt;BootstrapperApplicationRef Id=&quot;WixStandardBootstrapperApplication.RtfLicense&quot;/&gt;
    &lt;Chain&gt;
      &lt;MsiPackage SourceFile=&quot;client\target\wix\client-0.1.0-x86_64.msi&quot; /&gt;
      &lt;MsiPackage SourceFile=&quot;server\target\wix\server-0.1.0-x86_64.msi&quot; /&gt;
    &lt;/Chain&gt;
  &lt;/Bundle&gt;
&lt;/Wix&gt;
</code></pre></div>
<p>A GUID will need to be manually generated for the <code>UpgradeCode</code> attribute of
the <code>Bundle</code> tag and used to replace the <code>[Your GUID Here]</code> value. Now, the
bundle can be created but first both the client and server MSI packages must
be created. Thus, creating the bundle is a multi-step, or multi-command,
process:</p>
<div class="example-wrap"><pre class="language-dos"><code>C:\Path\to\Workspace&gt; cargo wix client\Cargo.toml
C:\Path\to\Workspace&gt; cargo wix server\Cargo.toml
C:\Path\to\Workspace&gt; cargo wix --name Bundle --install-version 1.0.0
</code></pre></div>
<p>The following project layout should exist:</p>
<div class="example-wrap"><pre class="language-text"><code>|-- C:\Path\to\Rust\Workspace
|-- |-- Cargo.toml
|-- |-- client
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- target
|-- |-- |-- |-- wix
|-- |-- |-- |-- |-- server-0.1.0-x86_64.msi
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
|-- |-- server
|-- |-- |-- Cargo.toml
|-- |-- |-- src
|-- |-- |-- |-- main.rs
|-- |-- |-- target
|-- |-- |-- |-- wix
|-- |-- |-- |-- |-- server-0.1.0-x86_64.msi
|-- |-- |-- wix
|-- |-- |-- |-- main.wxs
|-- |-- target
|-- |-- |-- Release
|-- |-- |-- |-- client.exe
|-- |-- |-- |-- server.exe
|-- |-- |-- wix
|-- |-- |-- |-- Bundle-1.0.0-x86_64.exe
|-- |-- wix
|-- |-- |-- main.wxs
</code></pre></div>
<p>Note the built binaries are located in the <code>target\Release</code> folder relative
to the workspace root as opposed to the <code>client\target\Release</code> and
<code>server\target\Release</code> folders, even though the MSI packages are available
in the member’s <code>target\wix</code> folders. This will fail if the various <code>cargo wix</code> commands are <em>not</em> executed from the workspace root.</p>
<p>The <code>name</code> and <code>install-version</code> options can be moved into a
<a href="#configuration">configuration</a> section for the subcommand within the
virtual manifest of the workspace, i.e. the Cargo.toml file with the
<code>[workspace]</code> section to avoid having to retype them each time a bundle is
created, but all three <code>cargo wix</code> commands must be issued each time.</p>
<p>While the above steps will create a bundle installer for the workspace-based
Rust project with a default, placeholder EULA, it is very manual and
cumbersome. For example, the bundle-based WiX Source (wxs) file will have to
be manually updated each time the version numbers of the member MSI packages
are changed because the paths to the source files are hard-coded in the XML.
Efforts are underway to improve support within the cargo-wix subcommand for
both workspaces and bundles (<a href="https://github.com/volks73/cargo-wix/issues/74">Issue #74</a> and <a href="https://github.com/volks73/cargo-wix/issues/98">Issue #98</a>).</p>
<h3 id="configuration"><a href="#configuration">Configuration</a></h3>
<p>The default subcommand, <code>cargo wix</code>, which creates a MSI based on the
contents of the package’s manifest (Cargo.toml) can be configured by adding
a <code>[package.metadata.wix]</code> section to the manifest. For each CLI option for
the default <em>create</em> subcommand, a field can be added to the
<code>[package.metadata.wix]</code> section. If the corresponding CLI option is used
with the default <em>create</em> subcommand, then the CLI option value will
override the value in the metadata section.</p>
<p>Below is an example <code>[package.metadata.wix]</code> section from a package’s
manifest that configures the default <em>create</em> subcommand:</p>
<div class="example-wrap"><pre class="language-toml"><code>[package.metadata.wix]
banner = &quot;path\to\banner.png&quot;
compiler-args = [&quot;-nologo&quot;, &quot;-wn&quot;]
culture = &quot;Fr-Fr&quot;
dbg-build = false
dbg-name = false
dialog = &quot;path\to\dialog.png&quot;
eula = &quot;path\to\eula.rtf&quot;
include = [&quot;Path\to\WIX\Source\File\One.wxs&quot;, &quot;Path\to\WIX\Source\File\Two.wxs&quot;]
license = &quot;path\to\license.txt&quot;
linker-args = [&quot;-nologo&quot;]
locale = &quot;Path\to\WIX\Localization\File.wxl&quot;
name = &quot;example&quot;
no-build = false
output = &quot;Path\and\file\name\for\installer.msi&quot;
path-guid = &quot;BFD25009-65A4-4D1E-97F1-0030465D90D6&quot;
product-icon = &quot;path\to\product_icon.ico&quot;
upgrade-guid = &quot;B36177BE-EA4D-44FB-B05C-EDDABDAA95CA&quot;
version = &quot;2.1.0&quot;
</code></pre></div>
<p>See the documentation for each CLI option for more information about each
field and its purpose. Note, the <code>name</code> and <code>version</code> fields will be the
name and version number of the application as it appears in the Add/Remove
Programs control panel, and the version number does <em>not</em> need to match the
package’s version number. In other words, the installed application can have
a different version number from the package, which is useful with multiple
binaries, workspaces, or distributing a “suite” of applications, where the
version number would be for the suite and not necessarily the individual
applications within the suite.</p>
<p>Please note that unlike most of the fields, the <code>include</code> field is an <a href="https://github.com/toml-lang/toml#user-content-array">TOML
array</a> instead of a string value. This is the same as passing multiple paths
to the default <em>create</em> subcommand using multiple <code>-I,--include</code> options or
including multiple WXS files in the default, <code>wix</code>, project source location.</p>
<p>The only CLI option, or argument, that is not supported in the
<code>[package.metadata.wix]</code> section is the <code>&lt;INPUT&gt;</code> argument for the default
<em>create</em> command, which specifies a relative or absolute path to a package’s
manifest file. The assumption is that the package manifest (Cargo.toml) to
be used for the default <em>create</em> subcommand is the same manifest that
contains the <code>[package.metadata.wix]</code> section.</p>
<h3 id="flags-and-options"><a href="#flags-and-options">Flags and Options</a></h3>
<p>Generally, any value that is obtained from the package’s manifest
(Cargo.toml) can be overridden at the command line with an appropriate
option. For example, the manufacturer, which is displayed as the “Publisher”
in the Add/Remove Programs (ARP) control panel is obtained from the first
author listed in the <code>authors</code> field of a project’s manifest, but it can be
overridden using the <code>-m,--manufacturer</code> option with the <code>cargo wix init</code>
subcommand.</p>
<p>Use the <code>-h,--help</code> flag with each subcommand to get a full list of options
and flags that are available. The short flag, <code>-h</code>, will print a condensed
version of each flag and option for the subcommand, while the long flag,
<code>--help</code>, will print a detailed help for each flag and option. The rest of
this section is a list of all flags and options implemented for all
subcommands.</p>
<h4 id="-b--banner"><a href="#-b--banner"><code>-b,--banner</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Sets the path to an image file (.png, .bmp, …) that will be displayed across
the top of each dialog in the installer. The banner image dimensions should
be 493 x 58 pixels, but the left-most 50% of that image is covered with text,
so if you want to leave a blank background for text readability, you only want
to color in the right-most ~200 pixels of that image.</p>
<h4 id="-b--bin-path"><a href="#-b--bin-path"><code>-b,--bin-path</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) and <em>sign</em> (<code>cargo wix sign</code>) subcommands.</p>
<p>The <code>-b,--bin-path</code> option can be used to specify a path (relative or
absolute) to the WiX Toolset <code>bin</code> folder. The <code>-b,--bin-path</code> option is
useful if a different version of the WiX Toolset needs to be used to create
the installer. The descending order of precedence is: (1) <code>-b,--bin-path</code>
option then (2) <code>WIX</code> system environment variable. An error will be
displayed if the compiler and/or linker cannot be found.</p>
<p>This option is also available for the <code>cargo wix sign</code> subcommand and can be
used to specify a path to the Windows SDK <code>bin</code> folder. This can be used to
override default <code>signtool</code> application found using the
<a href="https://doc.rust-lang.org/std/process/struct.Command.html#method.status"><code>std::process::Command::status</code></a> method.</p>
<h4 id="-b--binary"><a href="#-b--binary"><code>-B,--binary</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>A path to a binary, a.k.a. executable, to include in the installer <em>instead</em>
of any and all binaries defined in the package’s manifest (Cargo.toml). By
default, all binaries defined with the <code>[[bin]]</code> section in the package’s
manifest are included in the installer. If no <code>[[bin]]</code> section is defined,
then the package’s <code>name</code> field is used. This option can be used to
override, i.e. <em>not</em> append, the binaries that should be included in the
installer.</p>
<p>This option can be used multiple times to define multiple binaries to
include in the installer. The value is a path to a binary file. The file
stem (file name without extension) is used as the binary name within the WXS
file. A relative or absolute path is acceptable.</p>
<h4 id="-c--compiler-arg"><a href="#-c--compiler-arg"><code>-C,--compiler-arg</code></a></h4>
<p>Available for the default _create (<code>cargo wix</code>) subcommand.</p>
<p>Appends an argument to the WiX compiler (candle.exe) invocation. This
provides a mechanism for “passing” arguments to the compiler. This can be called
multiple times to pass multiple arguments (flags or options), but only one
value per occurrence is allowed to avoid ambiguity during argument parsing.
Note, if it is an option, i.e. argument with an accompanying value, then the
value must be passed as a separate usage of this option. For example, adding
an user-defined compiler extension would require the following command
<code>cargo wix -C -ext -C UserDefinedExtension</code> to yield a <code>candle -ext UserDefinedExtension</code> invocation.</p>
<h4 id="-c--culture"><a href="#-c--culture"><code>-c,--culture</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Sets the culture for localization. Use with the [<code>-l,--locale</code>] option. See
the <a href="http://wixtoolset.org/documentation/manual/v3/wixui/wixui_localization.html">WixUI localization documentation</a> for more information about acceptable
culture codes. The codes are case insensitive.</p>
<h4 id="-d--dbg-build"><a href="#-d--dbg-build"><code>-d,--dbg-build</code></a></h4>
<p>Available only for the default <em>create</em> (<code>cargo wix</code>) subcommmand.</p>
<p>Builds the package using the Debug profile instead of the Release profile
with Cargo. This flag is ignored if the <code>--no-build</code> flag is used. The
default is to build the package with the Release profile.</p>
<h4 id="-d--dbg-name"><a href="#-d--dbg-name"><code>-D,--dbg-name</code></a></h4>
<p>Available only for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Appends <code>-debug</code> to the file stem (portion before the dot and file
extension) of the installer’s file name. The default is to <em>not</em> include the
suffix. Generally, this should be used to indicate an installer contains a
binary that was built with debugging information and minimal optimizations
as a tradeoff for being able to troubleshoot execution of the application on
an end-user’s system. A release build generally does not contain any
debugging information but includes optimizations. It is typical to use this
flag with the <code>-d,--dbg-build</code> flag but it is not required. This allows a
developer to provide other mechanisms for creating a debugging variant of
his or her application and still use the Release profile.</p>
<h4 id="-d--description"><a href="#-d--description"><code>-d,--description</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>), <em>print</em> (<code>cargo wix print</code>),
and <em>sign</em> (<code>cargo wix sign</code>) subcommands.</p>
<p>The package description is used in multiple places for the installer,
including the text that appears in the blue UAC dialog when using a signed
installer. This can be overridden using the <code>-d,--description</code> option with
the <code>cargo wix init</code> or <code>cargo wix sign</code> subcommands, respectively.</p>
<h4 id="-d--dialog"><a href="#-d--dialog"><code>-D,--dialog</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Sets the path to an image file (.png, bmp, …) that will be displayed as
the background of the first dialog of the installer. The dialog image dimensions
should be 493 x 312 pixels, but the right-most 60% of that area is covered
by the actual text of the dialog, so if you want to leave a blank background for text
readability, you only want to color in the left-most ~200 pixels of that image.</p>
<p>The first dialog is known as the “Welcome” dialog.</p>
<h4 id="-e--eula"><a href="#-e--eula"><code>-e,--eula</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Specifies a Rich Text Format (RTF) file to use as the End User License
Agreement (EULA) for the license agreement dialog of the installer. The
default is to disable the license agreement dialog unless one of the
supported licenses (GPL-3.0, Apache-2.0, or MIT) is generated based on the
value of the <code>license</code> field in the package’s manifest (Cargo.toml). An EULA
can be enabled later by directly modifying the WiX Source (WXS) file with a
text editor.</p>
<p>When specified via <code>package.metadata.wix.eula</code> the path is assumed to be relative
to the Cargo.toml (directory). This field can also be set to <code>false</code> to disable
the eula even if we could auto-generate one for you, as described above.</p>
<h4 id="--force"><a href="#--force"><code>--force</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) subcommand.</p>
<p>Forces overwriting of generated files from the <em>init</em> subcommand. Use with
caution! This cannot be undone.</p>
<h4 id="-h--help"><a href="#-h--help"><code>-h,--help</code></a></h4>
<p>Available for all subcommands.</p>
<p>The short flag, <code>-h</code>, will print a condensed version of the help text, while
the long flag, <code>--help</code>, will print a more detailed version of the help
text.</p>
<h4 id="-u--homepage"><a href="#-u--homepage"><code>-u,--homepage</code></a></h4>
<p>Available for the <em>sign</em> (<code>cargo wix sign</code>) subcommand.</p>
<p>This will be displayed in the ACL dialog.</p>
<h4 id="--install"><a href="#--install"><code>--install</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Automatically runs the installer after creating it.</p>
<h4 id="-i--install-version"><a href="#-i--install-version"><code>-i,--install-version</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Overrides the version from the package’s manifest (Cargo.toml), which is
used for the installer name and appears in the Add/Remove Programs (ARP)
control panel.</p>
<h4 id="-i--include"><a href="#-i--include"><code>-I,--include</code></a></h4>
<p>Available only for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>This option can be used multiple times to include multiple WiX Source (WXS)
files in the creation of an installer. The option takes a path to a single
WXS file as its value. Any WXS files located in the default <code>wix</code> folder
located within the package’s root folder, i.e. same location as the
package’s manifest (Cargo.toml) are automatically included and used in the
creation of the installer. This option allows the inclusion of other WXS
files outside of the default <code>wix</code> location.</p>
<h4 id="-l--license"><a href="#-l--license"><code>-l,--license</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Overrides the <code>license-file</code> field or any license generated from the
<code>license</code> field of the package’s manifest (Cargo.toml). If an appropriate
license file does not exist, cannot be found, or is not specified, then no
license file is included in the installer or in the installation folder
along side the <code>bin</code> folder. A file containing the license, such as a TXT,
PDF, or RTF file, can be added later by directly editing the generated WiX
Source file (WXS) in a text editor.</p>
<p>When specified via <code>package.metadata.wix.license</code> the path is assumed to be relative
to the Cargo.toml (directory). This field can also be set to <code>false</code> to disable
the license auto-generation features described above.</p>
<h4 id="-l--linker-arg"><a href="#-l--linker-arg"><code>-L,--linker-arg</code></a></h4>
<p>Available for the default _create (<code>cargo wix</code>) subcommand.</p>
<p>Appends an argument to the WiX linker (light.exe) invocation. This provides
a mechanism for “passing” arguments to the linker. This can be called
multiple times to pass multiple arguments (flags or options). Only one value
per occurrence is allowed to avoid ambiguity during argument parsing. Note,
if it is an option, i.e. argument with an accompanying value, then the value
must be passed as a separate usage of this option. For example, adding an
user-defined linker extension would require the following command <code>cargo wix -L -ext -L UserDefinedExtension</code> to yield a <code>light -ext UserDefinedExtension</code> invocation.</p>
<h4 id="-l--locale"><a href="#-l--locale"><code>-l,--locale</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Sets the path to a WiX localization file (wxl) which contains localized
strings. Use in conjunction with the [<code>-c,--culture</code>] option.</p>
<h4 id="-m--manufacturer"><a href="#-m--manufacturer"><code>-m,--manufacturer</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Overrides the <code>authors</code> field of the package’s manifest
(Cargo.toml) as the manufacturer within the installer. The manufacturer can
be changed after initialization by directly modifying the WiX Source file
(WXS) with a text editor.</p>
<h4 id="-n--name"><a href="#-n--name"><code>-n,--name</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>Overrides the <code>name</code> field in the package’s manifest (Cargo.toml), which is
used in the file name of the installer (msi). This does not change the name
of the executable <em>within</em> the installer.</p>
<h4 id="--no-build"><a href="#--no-build"><code>--no-build</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) subcommand.</p>
<p>This skips building the Rust package using Cargo for the Release target.</p>
<h4 id="--nocapture"><a href="#--nocapture"><code>--nocapture</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>) and <em>sign</em> (<code>cargo wix sign</code>)
subcommands.</p>
<p>Displays all output from the builder (Cargo), compiler (candle.exe), linker
(light.exe), and signer (signtool.exe) applications.</p>
<h4 id="-o--output"><a href="#-o--output"><code>-o,--output</code></a></h4>
<p>Available for the default <em>create</em> (<code>cargo wix</code>), <em>init</em> (<code>cargo wix init</code>) and
<em>print</em> (<code>cargo wix print</code>) subcommands.</p>
<p>Sets the destination for <em>init</em> subcommand files, such as the WiX Source
file (WXS), an alternative to stdout for <em>print</em> subcommand, and the created
installer for the default <em>create</em> subcommand.</p>
<p>When used with the default <em>create</em> subcommand to create an installer (MSI),
if the path is to an existing directory or the path has a trailing <code>/</code> or
<code>\</code>, then the MSI will be available after creation at the specified path,
but the MSI file name will be the default file name based on the package
name, version, and platform.</p>
<h4 id="-o--owner"><a href="#-o--owner"><code>-O,--owner</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Sets the copyright owner of the license during initialization or printing.
The default is to use the <code>authors</code> field of the package’s manifest
(Cargo.toml). This is only used when generating a license based on the value
of the <code>license</code> field in the package’s manifest.</p>
<h4 id="-p--package"><a href="#-p--package"><code>-p,--package</code></a></h4>
<p>Available for the <em>create</em> (<code>cargo wix</code>), <em>init</em> (<code>cargo wix init</code>), and
<em>print</em> (<code>cargo wix print</code>) subcommands.</p>
<p>Selects the package within a workspace. This is required if a project
organized with a workspace. A workspace can have one or more members, where
each member may have a separate installer. This option has no effect if the
project does not use a workspace.</p>
<h4 id="--path-guid"><a href="#--path-guid"><code>--path-guid</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Overrides the automatically generated GUID for the path component with an
existing GUID in the hyphenated, uppercase format. The path GUID should only
be generated once for a product/project. The same GUID should be used for
all installer creations to ensure no artifacts are left after uninstalling
and proper modification of the <code>PATH</code> environment variable.</p>
<h4 id="--product-icon"><a href="#--product-icon"><code>--product-icon</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Sets the path to a 16x16 image file (.ico) that will be display as an icon in the
Add/Remove Programs (ARP) control panel for the installed application.</p>
<h4 id="--product-name"><a href="#--product-name"><code>--product-name</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>), <em>print</em> (<code>cargo wix print</code>),
and <em>sign</em> (<code>cargo wix sign</code>) subcommands.</p>
<p>Overrides the <code>name</code> field of the package’s manifest (Cargo.toml) as the
product name within the installer. The product name can be changed after
initialization or printing by directly modifying the WiX Source file (wxs)
with a text editor.</p>
<h4 id="-t--timestamp"><a href="#-t--timestamp"><code>-t,--timestamp</code></a></h4>
<p>Available for the <em>sign</em> (<code>cargo wix sign</code>) subcommand.</p>
<p>An alias or URL to a timestamp server when signing an installer with a
certificate. Valid aliases are: <code>Comodo</code> and <code>Versign</code>, which are case
insensitive.</p>
<h4 id="--upgrade-guid"><a href="#--upgrade-guid"><code>--upgrade-guid</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Overrides the automatically generated GUID for the product’s upgrade code
with an existing GUID in the hyphenated, uppercase format. The upgrade code
should only be generated once for a product/project. The same upgrade code
should then be used for all installer creations of the same product/project. If
a new GUID is used every time an installer is created, then each installer will
be installing the same product but as separate installations.</p>
<h4 id="-u--url"><a href="#-u--url"><code>-u,--url</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Adds a URL to the installer that will be displayed in the Add/Remove
Programs (ARP) control panel for the application. The default is to disable
it unless a URL is specified for either the <code>homepage</code>, <code>documentation</code>, or
<code>repository</code> fields in the package’s manifest (Cargo.toml). The help URL can
be enabled after initialization by directly modifying the WiX Source (wxs)
file with a text editor.</p>
<h4 id="-v--version"><a href="#-v--version"><code>-V,--version</code></a></h4>
<p>Available for all subcommands.</p>
<p>Prints the cargo-wix binary and subcommand version.</p>
<h4 id="-v--verbose"><a href="#-v--verbose"><code>-v,--verbose</code></a></h4>
<p>Available for all subcommands.</p>
<p>Increases the level of logging statements based on occurrence count of the
flag. The more <code>-v,--verbose</code> flags used, the more logging statements that
will be printed during execution of a subcommand. When combined with the
<code>--nocapture</code> flag, this is useful for debugging and testing.</p>
<h4 id="-i--installer"><a href="#-i--installer"><code>-i,--installer</code></a></h4>
<p>Available for the <em>sign</em> (<code>cargo wix sign</code>) subcommand.</p>
<p>Speicifies path to the installer(msi) to be signed.</p>
<h4 id="-y--year"><a href="#-y--year"><code>-y,--year</code></a></h4>
<p>Available for the <em>init</em> (<code>cargo wix init</code>) and <em>print</em> (<code>cargo wix print</code>)
subcommands.</p>
<p>Sets the copyright year for the license during initialization. The default
is to use the current year. This is only used if a license is generated from
one of the supported licenses based on the value of the <code>license</code> field in
the package’s manifest (Cargo.toml).</p>
</div></details><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.PKG_DESCRIPTION.html" title="constant cargo_wix::PKG_DESCRIPTION">PKG_DESCRIPTION</a></div></li><li><div class="item-name"><a class="constant" href="constant.PKG_NAME.html" title="constant cargo_wix::PKG_NAME">PKG_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.PKG_VERSION.html" title="constant cargo_wix::PKG_VERSION">PKG_VERSION</a></div></li><li><div class="item-name"><a class="constant" href="constant.SUBCOMMAND_NAME.html" title="constant cargo_wix::SUBCOMMAND_NAME">SUBCOMMAND_NAME</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.main.html" title="fn cargo_wix::main">main</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul></section></div></main></body></html>